# 04. Списъци

Полезни графики и обяснения се намират в упражненията на [inf2/04](https://github.com/triffon/fp-2022-23/blob/main/exercises/inf2/04/README.md) и [inf3/week4.md](https://github.com/triffon/fp-2022-23/blob/main/exercises/inf3/week4.md#%D1%81%D0%BF%D0%B8%D1%81%D1%8A%D1%86%D0%B8).

#### [Сваляне на задачите](https://download-directory.github.io/?url=https%3A%2F%2Fgithub.com%2Ftriffon%2Ffp-2022-23%2Ftree%2Fmain%2Fexercises%2Fcs2%2F04.scheme.lists)

При решаване на сложна задача със списъци (не като тези тук), най-подходящо е тя да се разбие на малки части, а именно на такива прости кратки функции (като тези тук до 17 задача вкл. и задача 20). Това позволява решението на задачата да се проследява последователно, дори да се чете на английски, подобно на математическо доказателство.

От днешното упражнение е хубаво да запомните решенията на следните малки функции, защото е много полезно да си ги възпроизвеждате като част от решенията на по-големи задачи:
- `from-to`
- `all?`
- `any?`
- `explode-digits`
- `take`
- `drop`

Отделно, от вградените функции, много честно се случва да се ползват `map` и `filter`, малко по-рядко но пак честно `member`, `append`, `reverse`.

> Вградените в R5RS функции в бъдеще може да ги ползвате наготово, но само ако си ги напишете този път.

### [Зад 1 `length`](01.length.rkt) (вградена)
Дължина на списък

### [Зад 2 `sum`](02.sum.rkt)
Сумата на всички числа от списък

### [Зад 3 `last`](03.last.rkt)
Последния елемент на списък

### [Зад 4 `append`](04.append.rkt) (вградена)
Слепя два списъка

### [Зад 5 `push-back`](05.push-back.rkt) (еквивалентна на (flip snoc))
Слага елемент накрая на списък (като създава нов списък)

### [Зад 6 `member?`](06.member.rkt) (вградена като `member`)
Дали `x` е елемент на списъка?

### [Зад 7 `from-to`](07.from-to.rkt) (много полезна)
Списък от числата `(a (+ a 1) (+ a 2) (+ a 3) ... b)`, тоест целите числа в интервала [`a`, `b`].

### [Зад 8 `reverse`](08.reverse.rkt) (вградена)
Обратен ред на елементите на списък.

### [Зад 9 `map`](09.map.rkt) (вградена)
Прилага функция над всеки от елементите на списък.

Спрямо `(a1 a2 a3 a4 ... an)` връща `((f a1) (f a2) (f a3) (f a4) ... (f an))`.

### [Зад 10 `filter`](10.filter.rkt) (вградена)
Списък от елементите на списък, които изпълняват предикат.

### [Зад 11 `partition`](11-partition.rkt)
Връща списък от два списъка.

Първият подсписък съдържа всички елементи които изпълняват предикат, а вторият съдържа всички, които не го.

### [Зад 12 `scp`](12.scp.rkt)
Сумата на третите степени на всички прости числа в списък

### [Зад 13 `take`](13.take.rkt) (полезна)
Списък от първите `n` елемента на списък

### [Зад 14 `drop`](14.drop.rkt) (полезна)
Списък от всички елементи на списък без първите `n`.

### [Зад 15 `all?`](15.all.rkt) (много полезна)
Дали всички елементи на списък изпълняват предиката `p?`?

### [Зад 16 `any?`](16.any.rkt) (много полезна)
Дали поне един елемент на списък изпълняват предиката `p?`?

<!-- TODO: for-next-year: задача използваща all?/any? -->

### [Зад 17 `remove`](17.remove.rkt) (донякъде полезна)
Премахва първото срещане на `x` в списък (връщайки нов списък).

### [Зад 18 `sorted?`](18.sorted.rkt)
Дали списък е сортиран?

### [Зад 19 `insertion-sort`](19.insertion-sort.rkt) (най-лесният алгоритъм за сортиране функционално)
Сортиране на списък по алгоритъма [insertion sort](https://en.wikipedia.org/wiki/Insertion_sort).

### [Зад 20 `explode-digits`](20.explode-digits.rkt) (много полезна за задачи с числа)
Списък от цифрите на цяло число.

### [Зад 21 `digit-occurence`](21.digit-occurence.rkt)
Намира колко пъти цифрата `d` се среща в цялото число `n`.

### [Зад 22 `remove-repeats`](22.remove-repeats.rkt)
Премахва последователните повторения на едно и също число от списък.

Пример:
```scheme
(remove-repeats '(1 1 4 4 3 3 4 4 4)) -> '(1 4 3 4)
(remove-repeats '(1 2 3 4)) -> '(1 2 3 4)
```

### Зад 23 (задача 3 от контролно 2017/18)
(9 т.) Нека  е даден  списък  l от числа  и двуместна
операция над числа ⊕. Функцията  f наричаме “ендоморфизъм
над l”, ако f трансформира l в себе си, запазвайки операцията ⊕,
т.е. ∀x∈l f(x)∈l и ∀x,y∈l f(x) ⊕ f(y) = f(x ⊕ y). Да се реализира
функция `is-em?`, която проверява дали f е ендоморфизъм.

Пример:
```scheme
(is-em? '(0 1 4 6) + (lambda (x) (remainder x 3))) ; → #t
```

### Зад 24 (вариант А, задача 2 от контролно 2019/20)
(10 т.) “Метрика” наричаме функция, която приема като
параметър  списък  от числа  и  връща  число  като  резултат.  Да  се
напише функция `max-metric`, която приема като параметри списък
от метрики `ml` и списък от списъци от числа `ll` и връща метрика `m` от
`ml`, за която сумата от стойностите, които `m` връща над елементите на
`ll`, е максимална в сравнение с останалите метрики от `ml`.

Примери:
```scheme
(define (prod l) (apply * l))
(define (sum l) (apply + l))

(max-metric (list sum prod) '((0 1 2) (3 4 5) (1337 0))) ; → <sum>
(max-metric (list car sum)  '((1000 -1000) (29 1) (42))) ; → <car>
```
